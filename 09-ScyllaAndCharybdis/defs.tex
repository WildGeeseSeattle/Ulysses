% Hades commands

\documentclass[12pt,twoside]{article}
\usepackage{ifthen}

% TODO: eat the preceding line ending
% Gabler edition line number
\newcommand{\gab}[1]{\marginpar[\small\raggedleft #1]{\small #1}}
% \newcommand{\gab}[1]{\fbox{#1}}

\newcommand{\sentence}[1]{\pagebreak[3]\section{#1}\indent}
%\newcommand{\stage}[1]{{\hskip 0.25em\sffamily[{\itshape{#1}\/}]\hskip 0.25em}}
\newcommand{\histstyle}[1]{\bigskip\centerline{--- \emph{{[}#1{]}} ---}\smallskip}

\newcommand{\headline}[1]{\pagebreak[3]\subsection*{\textsc{#1}}\indent}

\newcommand{\Quote}[1]{\emph{#1}}
\newcommand{\song}[1]{\emph{#1}}
\newcommand{\Title}[1]{\emph{#1}}

\newcommand{\latin}[1]{\emph{#1}}
\newcommand{\french}[1]{\emph{#1}}
\newcommand{\german}[1]{\emph{#1}}
\newcommand{\greek}[1]{\emph{#1}}
\newcommand{\italian}[1]{\emph{#1}}
\newcommand{\spanish}[1]{\emph{#1}}
\newcommand{\irish}[1]{\emph{#1}}
\newcommand{\yiddish}[1]{\emph{#1}}
\newcommand{\hebrew}[1]{\emph{#1}}
\newcommand{\Quotation}[1]{\emph{#1}}
\newcommand{\russian}[1]{\emph{#1}}

\newcommand{\role}[2]{%
% #1 is role name; #2 is the trailing ":"
{\pagebreak[0]\textbf{#1}%
{\nobreak\hskip 0.1em plus 0.25em\Large\char58\hskip 0.1em plus 0.1em minus 0.05em\relax}~}}
\newcommand{\Role}[2]{%
{\pagebreak[1]\vspace{9.5pt plus 5pt minus 4.5pt}\textbf{#1}%
{\nobreak\hskip 0.1em plus 0.25em\Large\char58\hskip 0.1em plus 0.1em minus 0.05em\relax}~}}
\newcommand{\narr}[2][N]{\role{#1#2}}
\newcommand{\Narr}[2][N]{\Role{#1#2}}
\newcommand{\nrole}[2]{\Narr{#1} #2.\par\Role{#2}}
\newcommand{\optrole}[2][0]{\ifthenelse {#1>0} {\nrole{#1}{#2}} {\Role{#2}}}
\newcommand{\Man}[2][Man]{\Role{#1 \##2}}
\newcommand{\Woman}[2][Woman]{\Role{#1 \##2}}

\newcounter{questions}

% Narrators 0-9
\newcommand{\N}[1]              {\Narr[N]{#1}}
\newcommand{\n}[1]              {\narr[n\/]{#1}}
\newcommand{\F}[1]              {\Narr[F]{#1}}
\newcommand{\f}[1]              {\narr[f\/]{#1}}
\newcommand{\M}[1]              {\Narr[M]{#1}}
\newcommand{\m}[1]              {\narr[m\/]{#1}}
\newcommand{\Q}[1]              {\addtocounter{questions}{1}%
\pagebreak[2]\bigskip\textbf{Q#1~~$\langle$\arabic{questions}$\rangle$\char58~}}
\newcommand{\A}                 {\role{\textbf{A}}}
\newcommand{\All}[1][0]         {\optrole[#1]{All}}
\newcommand{\Bloom}[1][0]       {\optrole[#1]{Bloom}}
\newcommand{\BloomInt}[1][0]    {\optrole[#1]{Bloom \emph{(int.)}}}
\newcommand{\Molly}[1][0]       {\optrole[#1]{Molly}}
\newcommand{\Stephen}[1][0]     {\optrole[#1]{Stephen}}
\newcommand{\StephenInt}[1][0]  {\optrole[#1]{Stephen \emph{(int.)}}}

\newcommand{\slfrac}[2]{\left.#1\middle/#2\right.}

\newcommand{\stage}[1]    {\textit{\textsc{#1}}\/}
\newcommand{\he}[1]       {\stage{#1}}
\newcommand{\she}[1]      {\stage{#1}}
\newcommand{\arse}        {\stage{arse}}
\newcommand{\AErussell}   {\optrole{Ã† Russell}}
\newcommand{\armstrong}   {\optrole{Armstrong}}
\newcommand{\american}    {\optrole{American}}
\newcommand{\attendant}   {\optrole{Attendant}}
\newcommand{\bantam}      {\optrole{Bantam Lyons}}
\newcommand{\beggar}      {\he{Beggar}}
\newcommand{\best}        {\optrole{Best}}
\newcommand{\bishop}      {\he{Bishop}}
\newcommand{\bloom}       {\he{Bloom}}
\newcommand{\bloomDa}     {\stage{Bloom's Father}}
\newcommand{\bloomMa}     {\stage{Bloom's Mother}}
\newcommand{\boy}         {\optrole{Boy}}
\newcommand{\boylan}      {\he{Boylan}}
\newcommand{\breen}       {\he{Denis Breen}}
\newcommand{\buddha}      {\he{Buddha}}
\newcommand{\burke}       {\he{Burke}}
\newcommand{\cards}       {\stage{Cards}}
\newcommand{\cohen}       {\he{Cohen}}
\newcommand{\cochrane}    {\optrole{Cochrane}}
\newcommand{\crawford}    {\optrole{Crawford}}
\newcommand{\coffey}      {\optrole{Fr~Coffey}}
\newcommand{\comyn}       {\optrole{Comyn}}
\newcommand{\cunningham}  {\optrole{Cunningham}}
\newcommand{\collins}     {\he{Dr~Collins}}
\newcommand{\corny}       {\optrole{Corny}}
\newcommand{\corrigan}    {\he{Fr~Corrigan}}
\newcommand{\criminal}    {\he{Criminal}}
\newcommand{\cuffe}       {\he{Cuffe}}
\newcommand{\curate}      {\optrole{Curate}}
\newcommand{\dArcy}       {\he{d'Arcy}}
\newcommand{\davybyrne}   {\optrole{Davy Byrne}}
\newcommand{\dbc}         {\stage{Dublin Baking Company}}
\newcommand{\deasy}       {\optrole{Mr~Deasy}}
\newcommand{\dillon}      {\he{Mr~Dillon}}
\newcommand{\dignam}      {\he{Paddy Dignam}}
\newcommand{\mrsdignam}   {\she{Mrs~Dignam}}
\newcommand{\dog}         {\he{Dog}}
\newcommand{\dollard}     {\he{Ben Dollard}}
\newcommand{\drover}      {\optrole{Drover}}
\newcommand{\henny}       {\he{Henny Doyle}}
\newcommand{\hynes}       {\optrole{Hynes}}
\newcommand{\eglinton}    {\optrole{Eglinton}}
\newcommand{\emperor}     {\he{Emperor}}
\newcommand{\fanny}       {\she{Fanny M'Coy}}
\newcommand{\father}      {\he{Molly's Father}}
\newcommand{\mrsfleming}  {\she{Mrs~Fleming}}
\newcommand{\foreman}     {\optrole{Foreman}}
\newcommand{\mrsjoeg}     {\she{Mrs~Joe Gallaher}}
\newcommand{\gardner}     {\he{Gardner}}
\newcommand{\gentfash}    {\he{Gentleman of Fashion}}
\newcommand{\goodwin}     {\he{Goodwin}}
\newcommand{\griffith}    {\he{Griffith}}
\newcommand{\groves}      {\he{Groves}}
\newcommand{\gunn}        {\he{Michael Gunn}}
\newcommand{\hester}      {\she{Hester Stanhope}}
\newcommand{\idiot}       {\he{Idiot}}
\newcommand{\jjom}        {\optrole{J.J.~O'Molloy}}
\newcommand{\josie}       {\optrole{Mrs~Breen}}
\newcommand{\kc}          {\he{K~C}}
\newcommand{\kernan}      {\optrole{Kernan}}
\newcommand{\lambert}     {\optrole{Ned Lambert}}
\newcommand{\mrlangtry}   {\he{Mr~Langtry}}
\newcommand{\mrslangtry}  {\she{Mrs~Langtry}}
\newcommand{\lenehan}     {\optrole{Lenehan}}
\newcommand{\leonard}     {\optrole{Paddy Leonard}}
\newcommand{\librarian}   {\optrole{Librarian}}
\newcommand{\lucan}       {\he{Lucan}}
\newcommand{\machugh}     {\optrole{MacHugh}}
\newcommand{\man}         {\optrole{Man}}
\newcommand{\mary}        {\optrole{Mary}}
\newcommand{\mastiansky}  {\he{Mr~Mastiansky}}
\newcommand{\maybrick}    {\he{Mr~Maybrick}}
\newcommand{\men}         {\optrole{Men}}
\newcommand{\menton}      {\optrole{Menton}}
\newcommand{\milly}       {\she{Milly}}
\newcommand{\molly}       {\she{Molly}}
\newcommand{\mulligan}    {\optrole{Mulligan}}
\newcommand{\mulvey}      {\he{Mulvey}}
\newcommand{\nannetti}    {\optrole{Nannetti}}
\newcommand{\nosey}       {\optrole{Nosey Flynn}}
\newcommand{\oconnell}    {\optrole{O'Connell}}
\newcommand{\omaddenburke}{\optrole{O'Madden Burke}}
\newcommand{\orourke}     {\he{O'Rourke}}
\newcommand{\other}       {\he{Other Man}}
\newcommand{\ourlord}     {\he{Our Lord}}
\newcommand{\pitman}      {\he{Man in Pit}}
\newcommand{\policeman}   {\optrole{Policeman}}
\newcommand{\power}       {\optrole{Mr~Power}}
\newcommand{\redhead}     {\he{Red~Head}}
\newcommand{\redmurray}   {\optrole{Red Murray}}
\newcommand{\riordan}     {\he{Mr~Riordan}}
\newcommand{\rochford}    {\optrole{Tom Rochford}}
\newcommand{\rudy}        {\he{Rudy Bloom}}
\newcommand{\sargent}     {\optrole{Sargent}}
\newcommand{\simon}       {\optrole{Simon Dedalus}}
\newcommand{\stanhope}    {\he{Mr~Stanhope}}
\newcommand{\stephen}     {\he{Stephen Dedalus}}
\newcommand{\statue}      {\he{Statue}}
\newcommand{\stripling}   {\optrole{Stripling}}
\newcommand{\student}     {\he{Student}}
\newcommand{\talbot}      {\optrole{Talbot}}
\newcommand{\timekeeper}  {\optrole{Timekeeper}}
\newcommand{\valdillon}   {\he{Val Dillon}}
\newcommand{\voice}       {\optrole{Voice}}
\newcommand{\wales}       {\he{Prince of Wales}}
\newcommand{\wogger}      {\he{Wogger}}
\newcommand{\woman}       {\optrole{Woman}}
\newcommand{\workman}     {\he{Workman}}

%---------------------------------------------

\usepackage[super]{nth}
\usepackage{geometry}
\geometry{letterpaper}

\usepackage[normalem]{ulem}
\usepackage{fontspec,xltxtra,xunicode}
\usepackage{fancybox}
\defaultfontfeatures{Mapping=tex-text}

%\setmainfont[Mapping=tex-text,Numbers=OldStyle]{Poly}
\setmainfont[Mapping=tex-text,Numbers=OldStyle]{Constantia}
%\setmainfont[Mapping=tex-text,Numbers=OldStyle]{Calendas Plus}
\newfontfamily{\examplefont}{Candara}

% Framed box
\newcommand{\fb}[1]{
  \begin{center}
    \fbox{\parbox{.9\textwidth}{\setlength\parindent{1em}#1}}
  \end{center}
}

\newcommand{\commentary}[1]{\bigskip\pagebreak[2]\fb{\centering #1}}

% Parenthetical remarks
\newcommand{\paren}[1]{\hskip 0.75em{\examplefont \emph{#1}}\hskip 0.75em}

\newcommand{\acting}[1]{\commentary{#1}\nobreak}

% Define | as magic separator (cadence bars)
\catcode`|=\active
\protected\def|{{\hskip 0.1em plus 0.25em\small$\wr$\hskip 0.1em plus 0.1em minus 0.05em\relax}}
